<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <template id="ks_account_report_lines">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="data_report_margin_top" t-value="12"/>
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>
                <t t-set="data_report_header_spacing" t-value="9"/>
                <t t-set="data_report_dpi" t-value="110"/>
                <div class="page">
                    <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                        <div class="row my-2 pims_report_content">
                            <div class="col-3">
                                <strong>Date From:</strong>
                                <p t-esc="js_data['ks_df_informations']['date']['ks_start_date']"/>
                            </div>
                            <div class="col-3">
                                <strong>Date To:</strong>
                                <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                            </div>
                        </div>
                    </t>
                    <t t-else="">
                        <div class="row my-2 pims_report_content">
                            <div class="col-3">
                                <strong>As of Date:</strong>
                                <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                            </div>
                        </div>
                    </t>
                    <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity']">
                        <div class="row my-2 pims_report_content">
                            <div class="col-3">
                                <strong>Comparison Date From:</strong>
                                <p t-esc="js_data['ks_df_informations']['ks_differ']['ks_start_date']"
                                />
                            </div>
                            <div class="col-3">
                                <strong>Comparison Date To:</strong>
                                <p t-esc="js_data['ks_df_informations']['ks_differ']['ks_end_date']"
                                />
                            </div>
                        </div>
                    </t>
                    <div class="row my-2 pims_report_content">
                        <div t-if="js_data['ks_df_informations'].get('analytic_accounts')" class="col-3">
                            <strong>Analytic:</strong>
                            <p t-esc="', '.join( lt or '' for lt in js_data['ks_df_informations']['selected_analytic_account_names'])"/>
                        </div>
                        <div t-if="js_data['ks_df_informations'].get('analytic_tags')" class="col-3">
                            <strong>Tags:</strong>
                            <p t-esc="', '.join( lt or '' for lt in js_data['ks_df_informations']['selected_analytic_tag_names'])"/>
                        </div>
                        <div class="col-3">
                            <strong>Journals:</strong>
                            <p t-esc="', '.join(journal.get('code') or 'ALL' for journal in js_data['ks_df_informations']['journals'] if journal.get('selected'))"/>
                        </div>
                        <div class="col-3">
                            <strong>Accounts:</strong>
                            <p t-esc="', '.join(account.get('name') or 'ALL' for account in js_data['ks_df_informations']['account'] if account.get('selected'))"/>
                        </div>
                    </div>
                    <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_debit_credit_visibility']">
                        <table class="pims_report_line_table table border-0 ks_table_1_pdf ks_table_2_pdf">
                            <thead class="thead-light">
                                <tr style="page-break-inside: avoid;" class="ks_report_lines_row">
                                    <th/>
                                    <th class="text-right">Debit</th>
                                    <th class="text-right">Credit</th>
                                    <th class="text-right">Balance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="page-break-inside: avoid;" t-foreach="js_data['ks_report_lines']" t-as="a"
                                    class="pims_report_line_main_tr ks_py-mline  'ks_level_'+ a.get('ks_level',0)">
                                    <td>
                                        <!--                                        <t t-if="a.get('ks_level', 0) in (1,2,3)">-->
                                        <!--                                            <img src="/ks_dynamic_financial_report/static/description/arrow.png"-->
                                        <!--                                                 style="max-width:20px;max-height:20px"/>-->
                                        <!--                                        </t>-->
                                        <span style="color: white;" t-esc="'...' * a.get('ks_level', 0)"/>
                                        <span t-att-style="style " t-esc="a.get('ks_name')"/>
                                    </td>
                                    <td class="text-right" style="white-space: text-nowrap;">
                                        <t t-if="a.get('debit')">
                                            <span t-att-style="style" t-esc="a.get('debit')"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </t>
                                        <t t-else="">
                                            <span t-att-style="style">-</span>
                                        </t>

                                    </td>

                                    <td class="text-right" style="white-space: text-nowrap;">
                                        <t t-if="a.get('credit')">
                                            <span t-att-style="style" t-esc="a.get('credit')"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </t>
                                        <t t-else="">
                                            <span t-att-style="style">-</span>
                                        </t>
                                    </td>

                                    <td class="text-right" style="white-space: text-nowrap;">
                                        <t t-if="a.get('balance')">
                                            <span t-att-style="style" t-esc="a.get('balance')"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </t>
                                        <t t-else="">
                                            <span t-att-style="style">-</span>
                                        </t>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </t>

                    <t t-if="not js_data['ks_df_informations']['ks_diff_filter']['ks_debit_credit_visibility']">
                        <table class="pims_report_line_table table border ks_table_1_pdf ks_table_2_pdf">

                            <thead class="thead-light">
                                <tr style="page-break-inside: avoid;" class="ks_report_lines_row">
                                    <th></th>
                                    <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity']">
                                        <t t-foreach="js_data['ks_report_lines'][0]['balance_cmp']"
                                           t-as="current_interval">
                                            <th class="amt-head" colspan="1">
                                                <span>
                                                    <t t-esc="current_interval.split('comp_bal_')[1]"/>
                                                </span>
                                            </th>
                                        </t>
                                    </t>


                                    <th class="text-right">Balance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr ks_py-mline "
                                    t-foreach="js_data['ks_report_lines']" t-as="a">
                                    <td>
                                        <span style="color: white;" t-esc="'...' * a.get('ks_level', 0)"/>
                                        <span t-att-style="style" t-esc="a.get('ks_name')"/>
                                    </td>
                                    <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity'] and a['balance_cmp']">
                                        <t t-foreach="a['balance_cmp']" t-as="current_interval">
                                            <td t-att-style="style_td" class="amt">
                                                <t t-if="a['balance_cmp'][current_interval]">
                                                    <span t-raw="a['balance_cmp'][current_interval]"
                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </td>
                                        </t>
                                    </t>
                                    <td class="text-right">
                                        <t t-if="a.get('balance')">
                                            <span t-att-style="style" t-esc="a.get('balance')"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </t>
                                        <t t-else="">
                                            <span t-att-style="style">-</span>
                                        </t>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </t>
                </div>
            </t>
        </t>
    </template>

    <template id="ks_df_executive_summary">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="data_report_margin_top" t-value="12"/>
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>
                <t t-set="data_report_header_spacing" t-value="9"/>
                <t t-set="data_report_dpi" t-value="110"/>
                <div class="page">

                    <div class="container-fluid">
                        <div class="row">
                            <h3 class="py-3 col-12" style="font-size:25px;">
                                <span t-esc="company.name"/>: Executive Summary
                            </h3>
                        </div>
                        <div class="row py-3 pims_report_content">
                            <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                                <div class="col-3">
                                    <strong>Date From:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_start_date']"/>
                                </div>
                                <div class="col-3">
                                    <strong>Date To:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                                </div>
                            </t>
                            <t t-else="">
                                <div class="col-3">
                                    <strong>As of Date:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                                </div>
                                <div class="col-3"></div>
                            </t>
                            <div class="col-3">
                                <strong>Journals:</strong>
                                <p t-esc="', '.join(journal.get('code') or 'ALL' for journal in js_data['ks_df_informations']['journals'] if journal.get('selected'))"/>
                            </div>
                            <div class="col-3">
                                <strong>Accounts:</strong>
                                <p t-esc="', '.join(account.get('name') or 'ALL' for account in js_data['ks_df_informations']['account'] if account.get('selected'))"/>
                            </div>
                        </div>
                        <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity']">
                            <div class="row pims_report_content">
                                <div class="col-3">
                                    <strong>Comparison Date From:</strong>
                                    <p t-esc="js_data['ks_df_informations']['ks_differ']['ks_start_date']"
                                    />
                                </div>
                                <div class="col-3">
                                    <strong>Comparison Date To:</strong>
                                    <p t-esc="js_data['ks_df_informations']['ks_differ']['ks_end_date']"
                                    />
                                </div>
                            </div>
                        </t>

                        <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_debit_credit_visibility']">
                            <table class="pims_report_line_table table border mb-0 ks_table_executive_pdf">
                                <thead class="thead-light">
                                    <tr style="page-break-inside: avoid;" class="ks_report_lines_row">
                                        <th/>
                                        <th class="text-right">Debit</th>
                                        <th class="text-right">Credit</th>
                                        <th class="text-right">Balance</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <tr style="page-break-inside: avoid;" t-foreach="js_data['ks_report_lines']"
                                        t-as="a" class="pims_report_line_main_tr 'ks_level_' + a.get('ks_level',0) ">
                                        <td>
                                            <span style="color: white;" t-esc="'...' * a.get('ks_level', 0)"/>
                                            <span t-att-style="style" t-esc="a.get('ks_name')"/>
                                        </td>
                                        <td class="text-right" style="white-space: text-nowrap;">
                                            <t t-if="a.get('company_currency_id') == False">
                                                <t t-if="a.get('debit')">
                                                    <t t-foreach="a.get('debit')" t-as="d">
                                                        <span t-att-style="style" t-esc="a.get('debit')[d]"
                                                        />
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-if="a.get('debit')">
                                                    <t t-foreach="a.get('debit')" t-as="d">
                                                        <span t-att-style="style" t-esc="a.get('debit')[d]"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </t>
                                        </td>
                                        <td class="text-right" style="white-space: text-nowrap;">
                                            <t t-if="a.get('company_currency_id') == False">
                                                <t t-if="a.get('credit')">
                                                    <t t-foreach="a.get('credit')" t-as="d">
                                                        <span t-att-style="style" t-esc="a.get('credit')[d]"
                                                        />
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-if="a.get('credit')">
                                                    <t t-foreach="a.get('credit')" t-as="d">
                                                        <span t-att-style="style" t-esc="a.get('credit')[d]"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </t>
                                        </td>
                                        <td class="text-right" style="white-space: text-nowrap;">

                                            <t t-if="a.get('company_currency_id') == False">
                                                <t t-if="a.get('balance')">
                                                    <t t-foreach="a.get('balance')" t-as="d">
                                                        <span t-att-style="style" t-esc="a.get('balance')[d]"
                                                        />
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-if="a.get('balance')">
                                                    <t t-foreach="a.get('balance')" t-as="d">
                                                        <span t-att-style="style" t-esc="a.get('balance')[d]"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </t>

                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </t>

                        <t t-if="not js_data['ks_df_informations']['ks_diff_filter']['ks_debit_credit_visibility']">
                            <table class="pims_report_line_table table border mb-0 ks_table_executive_pdf">

                                <thead class="thead-light">
                                    <tr style="page-break-inside: avoid;">
                                        <th/>
                                        <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity']">
                                            <th class="text-right">
                                                <span>
                                                    <t t-esc="js_data['ks_df_informations']['date']['ks_string']"/>
                                                </span>
                                            </th>

                                            <t t-foreach="js_data['ks_df_informations']['ks_differ']['ks_intervals']"
                                               t-as="current_interval">
                                                <th class="text-right">
                                                    <span>
                                                        <t t-esc="current_interval['ks_string']"/>
                                                    </span>
                                                </th>
                                            </t>
                                        </t>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr"
                                        t-foreach="js_data['ks_report_lines']" t-as="a">
                                        <td>
                                            <span style="color: white;" t-esc="'...' * a.get('ks_level', 0)"/>
                                            <span t-att-style="style" t-esc="a.get('ks_name')"/>
                                        </td>
                                        <t t-if="a.get('company_currency_id') == False">
                                            <t t-if="a.get('balance')">
                                                <t t-foreach="a.get('balance')" t-as="current_interval">
                                                    <td t-att-style="style_td" class="amt text-right">
                                                        <span t-raw="a.get('balance')[current_interval]"
                                                        />
                                                    </td>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <td/>
                                                <t t-foreach="js_data['ks_df_informations']['ks_differ']['ks_intervals']"
                                                   t-as="current_interval">
                                                    <td/>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-else="">
                                            <t t-if="a.get('balance')">
                                                <t t-foreach="a.get('balance')" t-as="current_interval">
                                                    <td t-att-style="style_td" class="amt text-right">
                                                        <span t-raw="a.get('balance')[current_interval]"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </td>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <td/>
                                                <t t-foreach="js_data['ks_df_informations']['ks_differ']['ks_intervals']"
                                                   t-as="current_interval">
                                                    <td/>
                                                </t>
                                            </t>
                                        </t>
                                    </tr>
                                </tbody>
                            </table>
                        </t>
                    </div>
                </div>
            </t>
        </t>
    </template>

    <template id="ks_account_report_trial_balance">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>

                <div class="page">
                    <style>
                        /* Professional PDF Report Styling matching UI &amp; Excel */
                        .ks_pdf_tb_table {
                        width: 100%;
                        border-collapse: collapse !important;
                        border: 2px solid #4a7ab0 !important;
                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
                        }
                        .ks_pdf_tb_table th, .ks_pdf_tb_table td {
                        border: 1px solid #ced4da !important;
                        vertical-align: middle;
                        padding: 6px 4px;
                        }
                        /* Thick vertical lines to separate major sections clearly */
                        .ks_section_divider {
                        border-right: 2px solid #2d5b8c !important;
                        }
                        /* Main Group Headers (Dark Blue) */
                        .ks_group_row th {
                        background-color: #2d5b8c !important;
                        color: #ffffff !important;
                        font-weight: bold;
                        text-align: center;
                        text-transform: uppercase;
                        font-size: 11px;
                        }
                        /* Sub Headers (High Contrast Light Blue/Grey) */
                        .ks_sub_header_row th {
                        background-color: #e2e6eb !important;
                        color: #1a3654 !important;
                        font-weight: bold;
                        text-align: center;
                        font-size: 11px;
                        }
                        /* Alternating Row Colors */
                        .ks_pdf_tb_table tbody tr:nth-child(even) td {
                        background-color: #f8f9fa !important;
                        }
                        /* Amounts formatting */
                        .ks_amt {
                        text-align: right !important;
                        font-family: "Courier New", Courier, monospace;
                        font-size: 11px !important;
                        white-space: nowrap;
                        }
                        /* High-Visibility Subtotal Row */
                        .ks_subtotal_row td {
                        background-color: #d1e3f8 !important;
                        color: #000000 !important;
                        font-weight: bold !important;
                        font-size: 12px !important;
                        border-top: 2px solid #2d5b8c !important;
                        border-bottom: 2px solid #2d5b8c !important;
                        }
                        /* Clean Header Info Box */
                        .ks_header_info {
                        background-color: #f8f9fa;
                        border-left: 5px solid #2d5b8c;
                        padding: 10px 15px;
                        margin-bottom: 20px;
                        border-radius: 0 4px 4px 0;
                        font-size: 12px;
                        }
                        .ks_badge {
                        background-color: #e2e6eb;
                        padding: 2px 6px;
                        border-radius: 4px;
                        font-size: 9px;
                        color: #1a3654;
                        font-weight: bold;
                        }
                    </style>

                    <div class="oe_structure"/>
                    <div class="container-fluid">

                        <div class="row">
                            <h3 class="py-2 col-12"
                                style="font-size:24px; color:#2d5b8c; font-weight:bold; text-transform:uppercase; text-align:center;">
                                <span t-esc="company.name"/>: TRIAL BALANCE
                            </h3>
                        </div>

                        <div class="row ks_header_info text-dark">
                            <div class="col-4">
                                <strong style="color:#2d5b8c;">Period:</strong>
                                <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                                    <span t-esc="js_data['ks_df_informations']['date']['ks_start_date']"/>
                                    to
                                    <span t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                                </t>
                                <t t-else="">
                                    <span t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                                </t>
                            </div>

                            <div t-if="js_data['ks_df_informations'].get('analytic_accounts')" class="col-4">
                                <strong style="color:#2d5b8c;">Analytic Accounts:</strong>
                                <span t-esc="', '.join( lt or '' for lt in js_data['ks_df_informations']['selected_analytic_account_names'])"/>
                            </div>

                            <div t-if="js_data['ks_df_informations'].get('analytic_tags')" class="col-4">
                                <strong style="color:#2d5b8c;">Analytic Tags:</strong>
                                <span t-esc="', '.join( lt or '' for lt in js_data['ks_df_informations']['selected_analytic_tag_names'])"/>
                            </div>
                        </div>

                        <table class="ks_pdf_tb_table">
                            <thead>
                                <tr class="ks_group_row">
                                    <th colspan="2" class="ks_section_divider">Accounts</th>
                                    <th colspan="2" class="ks_section_divider">Opening Balance</th>

                                    <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                                        <th colspan="2" class="ks_section_divider">
                                            <span t-esc="js_data['ks_df_informations']['date']['ks_start_date']"/>
                                            to
                                            <span t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                                        </th>
                                    </t>
                                    <t t-else="">
                                        <th colspan="2" class="ks_section_divider">Period</th>
                                    </t>

                                    <th colspan="2" class="ks_section_divider">Ending Balance</th>
                                    <th colspan="3">Account Groups</th>
                                </tr>

                                <tr class="ks_sub_header_row">
                                    <th style="width:7%;">Code</th>
                                    <th style="width:17%;" class="ks_section_divider text-left">Account Name</th>

                                    <th style="width:8%;">Debit</th>
                                    <th style="width:8%;" class="ks_section_divider">Credit</th>

                                    <th style="width:8%;">Debit</th>
                                    <th style="width:8%;" class="ks_section_divider">Credit</th>

                                    <th style="width:8%;">Debit</th>
                                    <th style="width:8%;" class="ks_section_divider">Credit</th>

                                    <th style="width:9%;">Main Group</th>
                                    <th style="width:9%;">Sub Group</th>
                                    <th style="width:10%;">Sub Sub Group</th>
                                </tr>
                            </thead>

                            <tbody>
                                <t t-foreach="js_data['ks_report_lines']" t-as="line">
                                    <tr>
                                        <td class="text-center"
                                            style="font-size:10px; font-weight:bold; color:#2d5b8c;">
                                            <span t-esc="js_data['ks_report_lines'][line]['code']"/>
                                        </td>
                                        <td class="ks_section_divider"
                                            style="font-size:10px; font-weight:bold; color:#333333;">
                                            <span t-esc="js_data['ks_report_lines'][line]['name']"/>
                                        </td>

                                        <td class="ks_amt">
                                            <span t-esc="js_data['ks_report_lines'][line].get('initial_debit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>
                                        <td class="ks_amt ks_section_divider">
                                            <span t-esc="js_data['ks_report_lines'][line].get('initial_credit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>

                                        <td class="ks_amt">
                                            <span t-esc="js_data['ks_report_lines'][line].get('debit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>
                                        <td class="ks_amt ks_section_divider">
                                            <span t-esc="js_data['ks_report_lines'][line].get('credit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>

                                        <td class="ks_amt" style="font-weight:bold; color:#000000;">
                                            <span t-esc="js_data['ks_report_lines'][line].get('ending_debit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>
                                        <td class="ks_amt ks_section_divider" style="font-weight:bold; color:#000000;">
                                            <span t-esc="js_data['ks_report_lines'][line].get('ending_credit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>

                                        <td class="text-center">
                                            <t t-if="js_data['ks_report_lines'][line].get('main_type')">
                                                <span class="ks_badge">
                                                    <t t-esc="js_data['ks_report_lines'][line]['main_type']"/>
                                                </span>
                                            </t>
                                        </td>
                                        <td class="text-center">
                                            <t t-if="js_data['ks_report_lines'][line].get('account_type')">
                                                <span class="ks_badge">
                                                    <t t-esc="js_data['ks_report_lines'][line]['account_type']"/>
                                                </span>
                                            </t>
                                        </td>
                                        <td class="text-center">
                                            <t t-if="js_data['ks_report_lines'][line].get('sub_type')">
                                                <span class="ks_badge">
                                                    <t t-esc="js_data['ks_report_lines'][line]['sub_type']"/>
                                                </span>
                                            </t>
                                        </td>
                                    </tr>
                                </t>

                                <t t-foreach="js_data['ks_subtotal']" t-as="line">
                                    <tr class="ks_subtotal_row" style="page-break-inside:avoid;">
                                        <td colspan="2" class="ks_section_divider text-right text-uppercase"
                                            style="padding-right:15px;">
                                            <span t-esc="js_data['ks_subtotal'][line]['name']"/>
                                        </td>

                                        <td class="ks_amt">
                                            <span t-esc="js_data['ks_subtotal'][line].get('initial_debit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>
                                        <td class="ks_amt ks_section_divider">
                                            <span t-esc="js_data['ks_subtotal'][line].get('initial_credit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>

                                        <td class="ks_amt">
                                            <span t-esc="js_data['ks_subtotal'][line].get('debit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>
                                        <td class="ks_amt ks_section_divider">
                                            <span t-esc="js_data['ks_subtotal'][line].get('credit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>

                                        <td class="ks_amt">
                                            <span t-esc="js_data['ks_subtotal'][line].get('ending_debit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>
                                        <td class="ks_amt ks_section_divider">
                                            <span t-esc="js_data['ks_subtotal'][line].get('ending_credit', 0.0)"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>

                                        <td colspan="3"></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-4"
                         style="text-align:center; padding-top: 15px; border-top: 2px solid #2d5b8c; color: #1a3654;">
                        <strong>*** END OF DOCUMENT ***</strong>
                    </div>
                </div>

                <div class="footer">
                    <div class="text-center"
                         style="border-top: 1px solid #ced4da; padding-top: 5px; font-size: 11px; color: #6c757d; font-family: sans-serif;">
                        Page
                        <span class="page"/>
                        of
                        <span class="topage"/>
                    </div>
                </div>

            </t>
        </t>
    </template>

    <template id="ks_dynamic_financial_general_ledger">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>
                <div class="page">
                    <div class="oe_structure"/>

                    <div class="container-fluid" style="padding: 0px;">

                        <div class="row">
                            <div class="col-12 text-center mt-2 mb-2">
                                <h3 style="font-family: 'Helvetica', sans-serif; font-weight: bold; font-size: 22px; text-transform: uppercase; margin-bottom: 2px; color: #333;">
                                    <span t-esc="company.name"/>
                                </h3>
                                <h4 style="font-weight: normal; font-size: 16px; color: #666; border-bottom: 1px solid #ccc; padding-bottom: 5px; display: inline-block; margin-top: 0px;">
                                    General Ledger Report
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-3" style="font-size: 12px; text-align: center;">
                            <div class="col-12">
                                <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                                    <strong>Date From:</strong>
                                    <span style="margin-right: 25px;"
                                          t-esc="js_data['ks_df_informations']['date'].get('ks_start_date')"/>
                                    <strong>Date To:</strong>
                                    <span t-esc="js_data['ks_df_informations']['date'].get('ks_end_date')"/>
                                </t>
                                <t t-else="">
                                    <strong>As of Date:</strong>
                                    <span t-esc="js_data['ks_df_informations']['date'].get('ks_end_date')"/>
                                </t>
                            </div>
                        </div>

                        <t t-if="request.env['ir.config_parameter'].sudo().get_param('ks_enable_ledger_in_bal')">

                            <t t-foreach="js_data['ks_report_lines']" t-as="line">
                                <t t-set="account_info" t-value="js_data['ks_report_lines'][line]"/>
                                <t t-set="is_bank_acc"
                                   t-value="account_info.get('is_bank_account') or any(l.get('is_bank_account') for l in account_info.get('lines', []))"/>

                                <table class="table"
                                       style="border-collapse: collapse; width: 100%; font-size: 10px; border: 2px solid #555555; margin-bottom: 8px;">

                                    <thead style="background-color: #2d5b8c; color: #ffffff; font-size: 11px;">
                                        <tr style="page-break-inside: avoid;">
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Date
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Journal
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Voucher
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Accounts
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Debit
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Credit
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Balance
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Status
                                            </th>
                                            <th class="text-center" style="border: 1px solid #4a7ab0; padding: 6px;">
                                                Reference / Narration
                                            </th>
                                            <t t-if="is_bank_acc">
                                                <th class="text-center"
                                                    style="border: 1px solid #4a7ab0; padding: 6px;">BRS Status
                                                </th>
                                            </t>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr style="background-color: #e2e6eb; font-weight: bold; color: #000000; page-break-inside: avoid;">
                                            <td t-att-colspan="is_bank_acc and 10 or 9"
                                                style="border: 1px solid #7a7a7a; padding: 6px; text-align: left; vertical-align: middle; white-space: nowrap;">
                                                <t t-set="main_group"
                                                   t-value="account_info.get('main_group') or 'N/A'"/>
                                                <t t-set="sub_group" t-value="account_info.get('sub_group') or 'N/A'"/>
                                                <t t-set="sub_sub_group"
                                                   t-value="account_info.get('sub_sub_group') or 'N/A'"/>
                                                Account:
                                                <span t-esc="account_info.get('code')"/>
                                                <span t-esc="account_info.get('name')"/>
                                                <span style="color: #444; font-size: 0.9em; margin-left: 15px;">[ Main
                                                    Group:
                                                    <t t-esc="main_group"/>
                                                    | Sub Group:
                                                    <t t-esc="sub_group"/>
                                                    | Sub Sub Group:
                                                    <t t-esc="sub_sub_group"/>
                                                    ]
                                                </span>
                                            </td>
                                        </tr>

                                        <t t-set="has_init_bal" t-value="False"/>
                                        <t t-foreach="account_info.get('lines', [])" t-as="check_line">
                                            <t t-if="check_line.get('initial_bal')">
                                                <t t-set="has_init_bal" t-value="True"/>
                                            </t>
                                        </t>

                                        <t t-if="not has_init_bal">
                                            <t t-set="forced_init_bal"
                                               t-value="account_info.get('initial_balance', 0.0)"/>
                                            <tr style="background-color: #f8f9fa; font-weight: bold; color: #000000; page-break-inside: avoid;">
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px 15px 5px 5px; text-align: right;">
                                                    Initial Balance
                                                </td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; white-space: nowrap;">
                                                    <span t-esc="abs(forced_init_bal)"
                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    <span t-if="forced_init_bal &lt; 0">Cr</span>
                                                    <span t-else="">Dr</span>
                                                </td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                <t t-if="is_bank_acc">
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                </t>
                                            </tr>
                                        </t>

                                        <t t-foreach="account_info.get('lines', [])" t-as="sub_line">
                                            <t t-if="sub_line.get('initial_bal')">
                                                <tr style="background-color: #f8f9fa; font-weight: bold; color: #000000; page-break-inside: avoid;">
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px 15px 5px 5px; text-align: right;">
                                                        Initial Balance
                                                    </td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; white-space: nowrap;">
                                                        <t t-set="i_bal" t-value="sub_line.get('balance', 0.0)"/>
                                                        <span t-esc="abs(i_bal)"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        <span t-if="i_bal &lt; 0">Cr</span>
                                                        <span t-else="">Dr</span>
                                                    </td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    <t t-if="is_bank_acc">
                                                        <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                                    </t>
                                                </tr>
                                            </t>
                                            <t t-elif="sub_line.get('ending_bal')">
                                            </t>
                                            <t t-else="">
                                                <tr style="background-color: #ffffff; page-break-inside: avoid;">

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: center; vertical-align: top; white-space: nowrap;">
                                                        <t t-esc="sub_line.get('ldate')"/>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: center; vertical-align: top;">
                                                        <t t-esc="sub_line.get('lcode')"/>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; vertical-align: top;">
                                                        <t t-esc="sub_line.get('move_name')"/>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: left; vertical-align: top;">
                                                        <t t-if="sub_line.get('corresponding_accounts')">
                                                            <t t-foreach="sub_line.get('corresponding_accounts').split(', ')"
                                                               t-as="acc_str">
                                                                <div t-esc="acc_str.strip()"/>
                                                            </t>
                                                        </t>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; vertical-align: top; white-space: nowrap;">
                                                        <span t-esc="sub_line.get('debit', 0.0)"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; vertical-align: top; white-space: nowrap;">
                                                        <span t-esc="sub_line.get('credit', 0.0)"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; vertical-align: top; white-space: nowrap; font-weight: bold;">
                                                        <t t-set="row_bal" t-value="sub_line.get('balance', 0.0)"/>
                                                        <span t-esc="abs(row_bal)"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        <span t-if="row_bal &lt; 0">Cr</span>
                                                        <span t-else="">Dr</span>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: center; vertical-align: top;">
                                                        <t t-esc="sub_line.get('move_state')"/>
                                                    </td>

                                                    <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: left; vertical-align: top;">
                                                        <t t-set="lref" t-value="(sub_line.get('lref') or '').strip()"/>
                                                        <t t-set="lname"
                                                           t-value="(sub_line.get('lname') or '').strip()"/>
                                                        <div t-if="lref" t-esc="lref"/>
                                                        <div t-if="lname and lname != lref" t-esc="lname"/>
                                                    </td>

                                                    <t t-if="is_bank_acc">
                                                        <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: center; vertical-align: top;">
                                                            <t t-set="brs_status"
                                                               t-value="sub_line.get('brs_status_en')"/>
                                                            <t t-if="brs_status == 'Cleared'">
                                                                <span style="color: #198754; font-weight: bold;">
                                                                    Cleared
                                                                </span>
                                                            </t>
                                                            <t t-elif="brs_status == 'Pending'">
                                                                <span style="color: #fd7e14; font-weight: bold;">
                                                                    Pending
                                                                </span>
                                                            </t>
                                                        </td>
                                                    </t>
                                                </tr>
                                            </t>
                                        </t>

                                        <tr style="background-color: #f8f9fa; font-weight: bold; color: #000000; page-break-inside: avoid;">
                                            <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px 15px 5px 5px; text-align: right;">
                                                Total:
                                            </td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; white-space: nowrap;">
                                                <span t-esc="account_info.get('debit', 0.0)"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; white-space: nowrap;">
                                                <span t-esc="account_info.get('credit', 0.0)"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px; text-align: right; white-space: nowrap;">
                                                <t t-set="final_bal" t-value="account_info.get('balance', 0.0)"/>
                                                <span t-esc="abs(final_bal)"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                <span t-if="final_bal &lt; 0">Cr</span>
                                                <span t-else="">Dr</span>
                                            </td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                            <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                            <t t-if="is_bank_acc">
                                                <td style="border: 1px solid #7a7a7a; padding: 5px;"></td>
                                            </t>
                                        </tr>
                                    </tbody>
                                </table>
                            </t>
                        </t>

                    </div>
                    <p class="mt-3 mb-1" style="text-align:center; font-size: 10px; color: #666;">*** END OF DOCUMENT
                        ***
                    </p>
                </div>
            </t>
        </t>
    </template>

    <template id="ks_dynamic_financial_partner_ledger">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>
                <div class="page">
                    <div class="oe_structure"/>
                    <div class="container-fluid">
                        <div class="row">
                            <h3 class="py-3 col-12" style="font-size:25px;">
                                <span t-esc="company.name"/>: Partner ledger
                            </h3>
                        </div>

                        <div class="row my-2 pims_report_content">
                            <div class="col-3">
                                <strong>Journals:</strong>
                                <p t-esc="', '.join(journal.get('code') or '' for journal in js_data['ks_df_informations']['journals'] if journal.get('selected'))"/>
                            </div>
                            <div class="col-3">
                                <strong>Display Account</strong>
                                <p>
                                    <t t-if="js_data['ks_df_informations']['ks_posted_entries']">Posted Entries</t>
                                    <t t-if="js_data['ks_df_informations']['ks_unposted_entries']">, Unposted Entries
                                    </t>
                                </p>
                            </div>

                            <div class="col-3">
                                <strong>Partner:</strong>
                                <p t-esc="', '.join( lt or '' for lt in js_data['ks_df_informations']['ks_selected_partner_name'])"/>
                            </div>

                            <div class="col-3">
                                <strong>Reconciled:</strong>
                                <t t-if="js_data['ks_df_informations']['ks_reconciled']">
                                    <p>Yes</p>
                                </t>
                                <t t-else="">
                                    <p>No</p>
                                </t>
                            </div>

                        </div>

                        <div class="row my-2 pims_report_content">
                            <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                                <div class="col-3">
                                    <strong>Date From:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_start_date']"
                                    />
                                </div>
                                <div class="col-3">
                                    <strong>Date To:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"
                                    />
                                </div>
                            </t>
                            <t t-else="">
                                <div class="col-3">
                                    <strong>As of Date:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"
                                    />
                                </div>
                                <div class="col-3"></div>
                            </t>

                            <div class="col-3">
                                <strong>Accounts:</strong>
                                <p t-esc="', '.join(acc.get('name') or '' for acc in js_data['ks_df_informations']['account_type'] if acc.get('selected'))"/>
                            </div>
                        </div>

                        <t t-if="request.env['ir.config_parameter'].sudo().get_param('ks_enable_ledger_in_bal')">
                            <table class="pims_report_line_table table border mb-0 pims_report_content">
                                <thead class="thead-light">
                                    <t t-if="not js_data['ks_df_informations']['ks_report_with_lines']">
                                        <tr style="page-break-inside: avoid;" class="text-center">
                                            <th colspan="5" class="text-center">Partner</th>
                                            <th style="text-align:right;padding-bottom:10px;">Initial Balance</th>
                                            <th style="text-align:right;padding-bottom:10px;">Debit</th>
                                            <th style="text-align:right">Credit</th>
                                            <th style="text-align:right">Balance</th>
                                        </tr>
                                    </t>
                                    <t t-if="js_data['ks_df_informations']['ks_report_with_lines']">
                                        <tr style="page-break-inside: avoid;" class="text-center">
                                            <th style="text-align:left;">Date</th>
                                            <th style="text-align:left;">JRNL</th>
                                            <th style="text-align:left;">Account</th>
                                            <th style="text-align:left;">Move</th>
                                            <th style="text-align:left;">Entry Label</th>
                                            <th style="text-align:right;padding-bottom:10px;">Initial Balance</th>
                                            <th style="text-align:right;padding-bottom:10px;">Debit</th>
                                            <th style="text-align:right">Credit</th>
                                            <th style="text-align:right">Balance</th>
                                        </tr>
                                    </t>
                                </thead>
                                <t t-foreach="js_data['ks_report_lines']" t-as="line">
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                        <td colspan="5">
                                            <span style="color: white;" t-esc="'..'"/>
                                            <span t-esc="js_data['ks_report_lines'][line]['name']"/>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="js_data['ks_report_lines'][line]['initial_balance']">
                                                <span t-esc="js_data['ks_report_lines'][line]['initial_balance']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>

                                        <td class="text-right">
                                            <t t-if="js_data['ks_report_lines'][line]['debit']">
                                                <span t-esc="js_data['ks_report_lines'][line]['debit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="js_data['ks_report_lines'][line]['credit']">
                                                <span t-esc="js_data['ks_report_lines'][line]['credit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="js_data['ks_report_lines'][line]['balance']">
                                                <span t-esc="js_data['ks_report_lines'][line]['balance']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                    </tr>

                                    <t t-foreach="js_data['ks_report_lines'][line]['lines']" t-as="sub_line">
                                        <t t-if="sub_line['initial_bal']">
                                            <tr style="page-break-inside: avoid;" class="pims_report_line_initial_tr">
                                                <td colspan="5" class="text-right">
                                                    <span>Initial Balance</span>
                                                </td>
                                                <td class="text-right">
                                                    <!--                                                <t t-if="js_data['ks_report_lines'][line]['initial_balance']">-->
                                                    <!--                                                    <span t-esc="sub_line['initial_balance']"-->
                                                    <!--                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>-->
                                                    <!--                                                </t>-->
                                                    <!--                                                <t t-else="">-->
                                                    <span t-att-style="style">-</span>
                                                    <!--                                                </t>-->
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="js_data['ks_report_lines'][line]['balance']">
                                                        <span t-esc="sub_line['debit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="js_data['ks_report_lines'][line]['credit']">
                                                        <span t-esc="sub_line['credit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="js_data['ks_report_lines'][line]['balance']">
                                                        <span t-esc="sub_line['balance']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                            </tr>
                                        </t>
                                        <t t-if="js_data['ks_df_informations']['ks_report_with_lines']">
                                            <t t-if="not sub_line['initial_bal'] and not sub_line['ending_bal']">
                                                <tr style="page-break-inside: avoid;" class="pims_report_line_data_tr">
                                                    <td>
                                                        <t t-esc="sub_line.get('ldate')"
                                                           t-options='{"widget": "date"}'/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="sub_line.get('lcode')"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="sub_line.get('account_name')"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="sub_line.get('move_name')"/>
                                                    </td>
                                                    <td style="width:30%;">
                                                        <t t-esc="sub_line.get('lname')"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <t t-if="sub_line.get('initial_balance')">
                                                            <span t-esc="sub_line.get('initial_balance')"
                                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span t-att-style="style">-</span>
                                                        </t>
                                                    </td>
                                                    <td class="text-right">
                                                        <t t-if="sub_line.get('debit')">
                                                            <span t-esc="sub_line.get('debit')"
                                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span t-att-style="style">-</span>
                                                        </t>
                                                    </td>
                                                    <td class="text-right">
                                                        <t t-if="sub_line.get('credit')">
                                                            <t t-esc="sub_line.get('credit')"
                                                               t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span t-att-style="style">-</span>
                                                        </t>
                                                    </td>
                                                    <td class="text-right">
                                                        <t t-if="sub_line.get('balance')">
                                                            <t t-esc="sub_line.get('balance')"
                                                               t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span t-att-style="style">-</span>
                                                        </t>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>
                                        <t t-if="sub_line['ending_bal']">
                                            <tr style="page-break-inside: avoid;" class="pims_report_line_initial_tr">
                                                <td colspan="5" class="text-right">
                                                    <span>Ending Balance</span>
                                                </td>
                                                <td class="text-right">
                                                    <!--                                                <t t-if="sub_line.get('debit')">-->
                                                    <!--                                                    <span t-esc="sub_line['debit']"-->
                                                    <!--                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>-->
                                                    <!--                                                </t>-->
                                                    <!--                                                <t t-else="">-->
                                                    <span t-att-style="style">-</span>
                                                    <!--                                                </t>-->
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="sub_line.get('debit')">
                                                        <span t-esc="sub_line['debit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="sub_line.get('credit')">
                                                        <span t-esc="sub_line['credit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>


                                                <td class="text-right">
                                                    <t t-if="sub_line.get('balance')">
                                                        <span t-esc="sub_line['balance']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </t>
                            </table>
                        </t>
                        <t t-else="">
                            <table class="pims_report_line_table table border mb-0 pims_report_content">
                                <thead class="thead-light">
                                    <t t-if="not js_data['ks_df_informations']['ks_report_with_lines']">
                                        <tr style="page-break-inside: avoid;" class="text-center">
                                            <th colspan="5" class="text-center">Partner</th>
                                            <th style="text-align:right;padding-bottom:10px;">Debit</th>
                                            <th style="text-align:right">Credit</th>
                                            <th style="text-align:right">Balance</th>
                                        </tr>
                                    </t>
                                    <t t-if="js_data['ks_df_informations']['ks_report_with_lines']">
                                        <tr style="page-break-inside: avoid;" class="text-center">
                                            <th style="text-align:left;">Date</th>
                                            <th style="text-align:left;">JRNL</th>
                                            <th style="text-align:left;">Account</th>
                                            <th style="text-align:left;">Move</th>
                                            <th style="text-align:left;">Entry Label</th>
                                            <th style="text-align:right;padding-bottom:10px;">Debit</th>
                                            <th style="text-align:right">Credit</th>
                                            <th style="text-align:right">Balance</th>
                                        </tr>
                                    </t>
                                </thead>
                                <t t-foreach="js_data['ks_report_lines']" t-as="line">
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                        <td colspan="5">
                                            <span style="color: white;" t-esc="'..'"/>
                                            <span t-esc="js_data['ks_report_lines'][line]['name']"/>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="js_data['ks_report_lines'][line]['debit']">
                                                <span t-esc="js_data['ks_report_lines'][line]['debit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="js_data['ks_report_lines'][line]['credit']">
                                                <span t-esc="js_data['ks_report_lines'][line]['credit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="js_data['ks_report_lines'][line]['balance']">
                                                <span t-esc="js_data['ks_report_lines'][line]['balance']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                    </tr>

                                    <t t-foreach="js_data['ks_report_lines'][line]['lines']" t-as="sub_line">
                                        <t t-if="sub_line['initial_bal']">
                                            <tr style="page-break-inside: avoid;" class="pims_report_line_initial_tr">
                                                <td colspan="5" class="text-right">
                                                    <span>Initial Balance</span>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="js_data['ks_report_lines'][line]['balance']">
                                                        <span t-esc="sub_line['debit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="js_data['ks_report_lines'][line]['credit']">
                                                        <span t-esc="sub_line['credit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="js_data['ks_report_lines'][line]['balance']">
                                                        <span t-esc="sub_line['balance']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                            </tr>
                                        </t>
                                        <t t-if="js_data['ks_df_informations']['ks_report_with_lines']">
                                            <t t-if="not sub_line['initial_bal'] and not sub_line['ending_bal']">
                                                <tr style="page-break-inside: avoid;" class="pims_report_line_data_tr">
                                                    <td>
                                                        <t t-esc="sub_line.get('ldate')"
                                                           t-options='{"widget": "date"}'/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="sub_line.get('lcode')"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="sub_line.get('account_name')"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="sub_line.get('move_name')"/>
                                                    </td>
                                                    <td style="width:30%;">
                                                        <t t-esc="sub_line.get('lname')"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <t t-if="sub_line.get('debit')">
                                                            <span t-esc="sub_line.get('debit')"
                                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span t-att-style="style">-</span>
                                                        </t>
                                                    </td>
                                                    <td class="text-right">
                                                        <t t-if="sub_line.get('credit')">
                                                            <t t-esc="sub_line.get('credit')"
                                                               t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span t-att-style="style">-</span>
                                                        </t>
                                                    </td>
                                                    <td class="text-right">
                                                        <t t-if="sub_line.get('balance')">
                                                            <t t-esc="sub_line.get('balance')"
                                                               t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span t-att-style="style">-</span>
                                                        </t>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>
                                        <t t-if="sub_line['ending_bal']">
                                            <tr style="page-break-inside: avoid;" class="pims_report_line_initial_tr">
                                                <td colspan="5" class="text-right">
                                                    <span>Ending Balance</span>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="sub_line.get('debit')">
                                                        <span t-esc="sub_line['debit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="sub_line.get('credit')">
                                                        <span t-esc="sub_line['credit']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="sub_line.get('balance')">
                                                        <span t-esc="sub_line['balance']"
                                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span t-att-style="style">-</span>
                                                    </t>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </t>
                            </table>
                        </t>
                    </div>

                    <p class="my-2" style="text-align:center;">*** END OF DOCUMENT ***</p>
                </div>
            </t>
        </t>
    </template>

    <template id="ks_dynamic_financial_age_receivable">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>
                <div class="page">
                    <div class="oe_structure"/>
                    <div class="container-fluid">
                        <div class="row">
                            <h3 class="my-3 col-12" style="font-size:25px;">
                                <span t-esc="company.name"/>
                                <t t-if="is_age_payble">: Age Payable</t>
                                <t t-else="">: Age Receivable</t>
                            </h3>
                        </div>
                        <div class="row my-2 pims_report_content">
                            <div class="col-3">
                                <strong>As Of Date:</strong>
                                <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                            </div>
                            <div class="col-3">
                                <strong>Partner:</strong>
                                <p t-esc="', '.join( lt or '' for lt in js_data['ks_df_informations']['ks_selected_partner_name']) if js_data['ks_df_informations']['ks_selected_partner_name'] else 'All'"/>
                            </div>
                        </div>

                        <table class="pims_report_line_table table ks-data-table-age  mb-o ks-data-table-age_pdf border pims_report_content">
                            <thead class="thead-light">
                                <tr style="page-break-inside: avoid;" class="text-center">
                                    <t t-if="not js_data['ks_df_informations']['ks_report_with_lines']">
                                        <th>Partner</th>
                                    </t>
                                    <t t-if="js_data['ks_df_informations']['ks_report_with_lines']">
                                        <th>Entry Label</th>
                                    </t>
                                    <th style="text-align:left;">Due Date</th>
                                    <th style="text-align:left;">Journal</th>
                                    <th style="text-align:left;">Account</th>
                                    <t t-foreach="js_data['ks_period_list']" t-as="period">
                                        <th style="text-align:right;margin-bottom:10px;">
                                            <t t-esc="period"/>
                                        </th>
                                    </t>
                                    <th style="text-align:right">Total</th>
                                </tr>
                            </thead>
                            <t t-foreach="js_data['ks_partner_dict']" t-as="line">
                                <t t-if="line == 'Total'">
                                    <t t-set="style" t-value="'font-weight: bold;'"/>
                                </t>
                                <t else="">
                                    <t t-set="style" t-value="'font-weight: normal;'"/>
                                </t>
                                <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                    <td>
                                        <t t-if="line == 'Total'">
                                            <span>Total</span>
                                        </t>
                                        <t t-else="">
                                            <span style="color: white;" t-esc="'..'"/>
                                            <span t-esc="js_data['ks_partner_dict'][line]['partner_name']"/>
                                        </t>
                                    </td>
                                    <td/>
                                    <td/>
                                    <td/>
                                    <t t-foreach="js_data['ks_period_list']" t-as="period">
                                        <td class="text-right">
                                            <span t-esc="js_data['ks_partner_dict'][line][period]"
                                                  t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                        </td>
                                    </t>
                                    <td class="text-right">
                                        <span t-esc="js_data['ks_partner_dict'][line]['total']"
                                              t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                    </td>
                                </tr>
                                <t t-if="js_data['ks_df_informations']['ks_report_with_lines']">
                                    <t t-foreach="js_data['ks_partner_dict'][line].get('lines')" t-as="sublines">
                                        <tr style="page-break-inside: avoid;" class="pims_report_line_data_tr">
                                            <td>
                                                <t t-esc="sublines.get('move_name')"/>
                                            </td>
                                            <td>
                                                <t t-esc="sublines.get('date_maturity')"/>
                                            </td>
                                            <td>
                                                <t t-esc="sublines.get('journal_name')">
                                                </t>
                                            </td>
                                            <td>
                                                <t t-esc="sublines.get('account_name')">
                                                </t>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="sublines.get('range_0')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}">
                                                </span>
                                                <span t-att-style="style"></span>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="sublines.get('range_1')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}">
                                                </span>
                                                <span t-att-style="style"></span>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="sublines.get('range_2')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}">
                                                </span>
                                                <span t-att-style="style"></span>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="sublines.get('range_3')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}">
                                                </span>
                                                <span t-att-style="style"></span>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="sublines.get('range_4')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}">
                                                </span>
                                                <span t-att-style="style"></span>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="sublines.get('range_5')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}">
                                                </span>
                                                <span t-att-style="style"></span>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="sublines.get('range_6')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}">
                                                </span>
                                                <span t-att-style="style"></span>
                                            </td>
                                            <td/>
                                        </tr>

                                    </t>
                                </t>
                            </t>
                        </table>
                    </div>
                </div>
            </t>
        </t>
    </template>

    <template id="ks_dynamic_financial_consolidate_journal">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>
                <div class="page">
                    <div class="oe_structure"/>
                    <div class="container-fluid">
                        <div class="row">
                            <h3 class="py-3 col-12" style="font-size:25px;">
                                <span t-esc="company.name"/>: Consolidated Journals
                            </h3>
                        </div>
                        <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                            <div class="row my-2 pims_report_content">
                                <div class="col-3">
                                    <strong>Date From:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_start_date']"
                                    />
                                </div>
                                <div class="col-3">
                                    <strong>Date To:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"
                                    />
                                </div>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="row my-2 pims_report_content">
                                <div class="col-3">
                                    <strong>As of Date:</strong>
                                    <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"
                                    />
                                </div>
                            </div>
                        </t>
                        <div class="row my-2 pims_report_content">
                            <div class="col-3">
                                <strong>Journals:</strong>
                                <p t-esc="','.join(journal.get('code') or '' for journal in js_data['ks_df_informations']['journals'] if journal.get('selected'))"/>
                            </div>
                            <div class="col-3">
                                <strong>Accounts:</strong>
                                <p t-esc="','.join(account.get('name') or '' for account in js_data['ks_df_informations']['account'] if account.get('selected'))"/>
                            </div>
                        </div>
                        <table class="pims_report_line_table pims_report_content border mb-0  table ks_table_cj0_pdf">
                            <thead class="thead-light">
                                <t t-if="not js_data['ks_df_informations']['ks_report_with_lines']">
                                    <tr style="page-break-inside: avoid;" class="text-center">
                                        <th colspan="5" class="">Journal</th>
                                        <th style="text-align:right;padding-bottom:10px;">Debit</th>
                                        <th style="text-align:right">Credit</th>
                                        <th style="text-align:right">Balance</th>
                                    </tr>
                                </t>
                                <t t-if="js_data['ks_df_informations']['ks_report_with_lines']">
                                    <tr style="page-break-inside: avoid;" class="text-center">
                                        <th style="text-align:left;">Account Name</th>
                                        <th style="text-align:right;padding-bottom:10px;">Debit</th>
                                        <th style="text-align:right">Credit</th>
                                        <th style="text-align:right">Balance</th>
                                    </tr>
                                </t>
                            </thead>
                            <t t-foreach="js_data['ks_report_lines']" t-as="line">
                                <t t-if="not js_data['ks_df_informations']['ks_report_with_lines']">
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                        <td colspan="5">
                                            <span style="color: white;" t-esc="'..'"/>
                                            <span t-esc="line['name']"/>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="line['debit']">
                                                <span t-esc="line['debit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="line['credit']">
                                                <span t-esc="line['credit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="line['balance']">
                                                <span t-esc="line['balance']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                                <t t-else="">
                                    <t t-if="line['id']!='total'">
                                        <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                            <td colspan="6" class="text-center">
                                                <span t-esc="line['name']" align="center"/>
                                            </td>
                                        </tr>
                                        <t t-foreach="line.get('lines')" t-as="line_details">
                                            <tr style="page-break-inside: avoid;" class="pims_report_line_data_tr">
                                                <td class="text-left">
                                                    <span t-esc="line_details.get('account_name')"/>
                                                </td>
                                                <td class="text-right">
                                                    <t t-esc="line_details.get('debit')"
                                                       t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                </td>
                                                <td class="text-right">
                                                    <t t-esc="line_details.get('credit')"
                                                       t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                </td>
                                                <td class="text-right">
                                                    <t t-esc="line_details.get('balance')"
                                                       t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                            <td colspan="6" class="text-center">
                                                <span t-esc="line['name']" align="center"/>
                                            </td>
                                        </tr>
                                        <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                            <td>
                                                <span style="color: white;" t-esc="'..'"/>
                                                <span t-esc="line['name']"/>
                                            </td>
                                            <td class="text-left">
                                                <t t-if="line['debit']">
                                                    <span t-esc="line['debit']"
                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </td>
                                            <td class="text-left">
                                                <t t-if="line['credit']">
                                                    <span t-esc="line['credit']"
                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </td>
                                            <td class="text-left">
                                                <t t-if="line['balance']">
                                                    <span t-esc="line['balance']"
                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                </t>
                                                <t t-else="">
                                                    <span t-att-style="style">-</span>
                                                </t>
                                            </td>
                                        </tr>
                                    </t>

                                </t>
                            </t>
                            <!--Details per month-->
                            <t t-if="not js_data['ks_df_informations']['ks_report_with_lines']">
                                <t t-foreach="js_data['ks_month_lines']" t-as="month">
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr">
                                        <td colspan="5">
                                            <span style="color: white;" t-esc="'..'"/>
                                            <span t-esc="month['name']"/>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="month['debit']">
                                                <span t-esc="month['debit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="month['credit']">
                                                <span t-esc="month['credit']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="month['balance']">
                                                <span t-esc="month['balance']"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                            <t t-else="">
                                <t t-foreach="js_data['ks_month_lines']" t-as="month">
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_data_tr">
                                        <td class="text-left">
                                            <span t-esc="month['name']"/>
                                            <!--                                            <span t-att-style="style">-</span>-->
                                        </td>
                                        <td class="text-right">
                                            <t t-esc="month['debit']"
                                               t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            <!--                                            <span t-att-style="style">-</span>-->
                                        </td>
                                        <td class="text-right">
                                            <t t-esc="month['credit']"
                                               t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            <!--                                            <span t-att-style="style">-</span>-->
                                        </td>
                                        <td class="text-right">
                                            <t t-esc="month['balance']"
                                               t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            <!--                                            <span t-att-style="style">-</span>-->
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </table>
                    </div>
                    <div class="py-4">
                        <p class="my-5" style="text-align:center">*** END OF DOCUMENT ***</p>
                    </div>
                </div>
            </t>
        </t>
    </template>

    <template id="ks_dynamic_financial_tax_report">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <t t-set="data_report_margin_top" t-value="12"/>
                <t t-set="company"
                   t-value="request.env['res.company'].sudo().browse(js_data['ks_df_informations'].get('company_id'))"/>
                <t t-set="data_report_header_spacing" t-value="9"/>
                <t t-set="data_report_dpi" t-value="110"/>
                <div class="page">
                    <style>
                        .ks_table_tax_report_pdf tbody tr td {
                        border-top: 1px solid #ccc;
                        border-bottom: 1px solid #ccc;
                        }
                        .ks_table_tax_report_pdf tbody tr:first-child td {
                        border-top:none;
                        }
                        .ks_table_tax_report_pdf tbody tr:last-child td {
                        border-bottom:none;
                        }

                    </style>

                    <div class="row">
                        <h3 class="py-3 col-12" style="font-size:25px;">
                            <span t-esc="company.name"/>: Tax Report
                        </h3>
                    </div>
                    <t t-if="js_data['ks_df_informations']['date']['ks_process'] == 'range'">
                        <div class="row my-4 pims_report_content">
                            <div class="col-3">
                                <strong>Date From:</strong>
                                <p t-esc="js_data['ks_df_informations']['date']['ks_start_date']"/>
                            </div>
                            <div class="col-3">
                                <strong>Date To:</strong>
                                <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                            </div>
                        </div>
                    </t>
                    <t t-else="">
                        <div class="row my-4 pims_report_content">
                            <div class="col-3">
                                <strong>As of Date:</strong>
                                <p t-esc="js_data['ks_df_informations']['date']['ks_end_date']"/>
                            </div>
                        </div>
                    </t>
                    <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity']">
                        <div class="row my-4 pims_report_content">
                            <div class="col-3">
                                <strong>Comparison Date From:</strong>
                                <p t-esc="js_data['ks_df_informations']['ks_differ']['ks_start_date']"
                                />
                            </div>
                            <div class="col-3">
                                <strong>Comparison Date To:</strong>
                                <p t-esc="js_data['ks_df_informations']['ks_differ']['ks_end_date']"
                                />
                            </div>
                        </div>
                    </t>

                    <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_debit_credit_visibility']">
                        <div class="border">
                            <table class="pims_report_line_table border mb-0 table ks_table_tax_report_pdf">
                                <thead class="thead-light">
                                    <tr style="page-break-inside: avoid;">
                                        <th/>
                                        <th class="text-right">Amount</th>
                                        <th class="text-right">Tax</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr"
                                        t-foreach="js_data['ks_report_lines']"
                                        t-as="a">
                                        <td>
                                            <span style="color: white;" t-esc="'...' * a.get('ks_level', 0)"/>
                                            <span t-att-style="style" t-esc="a.get('ks_name')"/>
                                        </td>
                                        <td class="text-right" style="white-space: text-nowrap;">
                                            <t t-if="a.get('ks_net_amount')">
                                                <span t-att-style="style" t-esc="a.get('ks_net_amount')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>

                                        </td>

                                        <td class="text-right" style="white-space: text-nowrap;">
                                            <t t-if="a.get('tax')">
                                                <span t-att-style="style" t-esc="a.get('tax')"
                                                      t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-att-style="style">-</span>
                                            </t>
                                        </td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                    <t t-if="not js_data['ks_df_informations']['ks_diff_filter']['ks_debit_credit_visibility']">
                        <div class="border">
                            <table class="pims_report_line_table mb-0 table border ks_table_tax_report_pdf">

                                <thead class="thead-light">
                                    <tr style="page-break-inside: avoid;">
                                        <th></th>
                                        <th class="amt-head" colspan="1">
                                            <span>Net Amount
                                                <br></br>
                                                <t t-esc="js_data['ks_df_informations']['date']['ks_string']"/>
                                            </span>

                                        </th>
                                        <th class="amt-head" colspan="1">
                                            <span>Net tax
                                                <br></br>
                                                <t t-esc="js_data['ks_df_informations']['date']['ks_string']"/>
                                            </span>
                                        </th>
                                        <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity']">
                                            <t t-foreach="js_data['ks_df_informations']['ks_differ']['ks_intervals']"
                                               t-as="current_interval">
                                                <th class="amt-head" colspan="1">
                                                    <span>Net Amount
                                                        <br></br>
                                                        <t t-esc="current_interval['ks_string']"/>
                                                    </span>
                                                </th>
                                                <th class="amt-head" colspan="1">
                                                    <span>Net tax
                                                        <br></br>
                                                        <t t-esc="current_interval['ks_string']"/>
                                                    </span>
                                                </th>
                                            </t>
                                        </t>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="page-break-inside: avoid;" class="pims_report_line_main_tr"
                                        t-foreach="js_data['ks_report_lines']"
                                        t-as="a">
                                        <td>
                                            <span style="color: white;" t-esc="'...' * a.get('ks_level', 0)"/>
                                            <span t-att-style="style" t-esc="a.get('ks_name')"/>
                                        </td>
                                        <t t-if="js_data['ks_df_informations']['ks_diff_filter']['ks_diff_filter_enablity'] and a['balance_cmp']">
                                            <t t-foreach="a['balance_cmp']" t-as="current_interval">

                                                <td t-att-style="style_td" class="amt">
                                                    <span t-raw="current_interval[0]['ks_com_net']"
                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>

                                                    <!--                                        <t t-esc="cn['ks_com_net']"/>-->
                                                </td>

                                                <td t-att-style="style_td" class="amt">
                                                    <span t-raw="current_interval[1]['ks_com_tax']"
                                                          t-options="{'widget': 'monetary', 'display_currency': company.currency_id}"/>
                                                    <!--                                        <t t-esc="cn['ks_com_tax']"/>-->
                                                </td>
                                            </t>

                                        </t>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                </div>
            </t>
        </t>
    </template>

    <template id="ks_dynamic_financial_age_payable">
        <t t-set="is_age_payble" t-value="True"/>
        <t t-call="ks_dynamic_financial_report.ks_dynamic_financial_age_receivable"/>
    </template>

    <record id="ks_dynamic_financial_partner_led_action" model="ir.actions.report">
        <field name="name">Partner Ledger Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_dynamic_financial_partner_ledger</field>
        <field name="report_file">ks_dynamic_financial_report.ks_dynamic_financial_partner_ledger</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_tax_action" model="ir.actions.report">
        <field name="name">Tax Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_dynamic_financial_tax_report</field>
        <field name="report_file">ks_dynamic_financial_report.ks_dynamic_financial_tax_report</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_age_rec_action" model="ir.actions.report">
        <field name="name">Age Receivable Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_dynamic_financial_age_receivable</field>
        <field name="report_file">ks_dynamic_financial_report.ks_dynamic_financial_age_receivable</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_age_pay_action" model="ir.actions.report">
        <field name="name">Age Payable Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_dynamic_financial_age_payable</field>
        <field name="report_file">ks_dynamic_financial_report.ks_dynamic_financial_age_payable</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_cons_journal_action" model="ir.actions.report">
        <field name="name">Consolidate Journal Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_dynamic_financial_consolidate_journal</field>
        <field name="report_file">ks_dynamic_financial_report.ks_dynamic_financial_consolidate_journal</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_gel_bal_action" model="ir.actions.report">
        <field name="name">General Ledger Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_dynamic_financial_general_ledger</field>
        <field name="report_file">ks_dynamic_financial_report.ks_dynamic_financial_general_ledger</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_trial_bal_action" model="ir.actions.report">
        <field name="name">Trial Balance Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_account_report_trial_balance</field>
        <field name="report_file">ks_dynamic_financial_report.ks_account_report_trial_balance</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_report_action" model="ir.actions.report">
        <field name="name">Dynamic Financial Report</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_account_report_lines</field>
        <field name="report_file">ks_dynamic_financial_report.ks_account_report_lines</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
    <record id="ks_dynamic_financial_executive_action" model="ir.actions.report">
        <field name="name">Executive Summary</field>
        <field name="model">ks.dynamic.financial.reports</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ks_dynamic_financial_report.ks_df_executive_summary</field>
        <field name="report_file">ks_dynamic_financial_report.ks_df_executive_summary</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>
</odoo>